!function(){"use strict";window.i18next=window.i18next||{t:function(e){return e}};var e=window.i18next.t.bind(window.i18next);function t(e,t){return document.currentScript.getAttribute("data-"+e)||t}var n=t("page-url",window.location.href.replace(/#.*$/,"")),o=t("add-urls",void 0),r=t("id","webmentions"),i=t("wordcount"),a=t("max-webmentions",30),s=t("prevent-spoofing")?"wm-source":"url",u=t("sort-by","published"),c=t("sort-dir","up"),l=t("comments-are-reactions"),f={"in-reply-to":e("replied"),"like-of":e("liked"),"repost-of":e("reposted"),"bookmark-of":e("bookmarked"),"mention-of":e("mentioned"),rsvp:e("RSVPed"),"follow-of":e("followed")},p={"in-reply-to":"ğŸ’¬","like-of":"â¤ï¸","repost-of":"ğŸ”„","bookmark-of":"â­ï¸","mention-of":"ğŸ’¬",rsvp:"ğŸ“…","follow-of":"ğŸœ"},h={yes:"âœ…",no:"âŒ",interested:"ğŸ’¡",maybe:"ğŸ’­"};function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function m(t,n){var o=d(t.author&&t.author.name?t.author.name:t.url.split("/")[2]),r=f[t["wm-property"]]||e("reacted");!n&&t.content&&t.content.text&&(r+=": "+g(t));var i='<a class="reaction" rel="nofollow ugc" title="'+o+" "+r+'" href="'+t[s]+'">';return t.author&&t.author.photo&&(i+='<img src="'+d(t.author.photo)+'" loading="lazy" decoding="async" alt="'+o+'">'),i+=p[t["wm-property"]]||"ğŸ’¥",t.rsvp&&h[t.rsvp]&&(i+="<sub>"+h[t.rsvp]+"</sub>"),i+="</a>"}function w(e){return e.substr(e.indexOf("//"))}function v(e){var t=[],n={};return e.forEach((function(e){var o=w(e.url);n[o]||(t.push(e),n[o]=!0)})),t}function g(e){var t=d(e.content.text);if(i){var n=t.replace(/\s+/g," ").split(" ",i+1);n.length>i&&(n[i-1]+="&hellip;",t=(n=n.slice(0,i)).join(" "))}return t}function b(t,n){return e(t)+n>1?"s":""}window.addEventListener("load",(function(){var t=document.getElementById(r);if(t){var i=[w(n)];o&&o.split("|").forEach((function(e){i.push(w(e))}));var f="https://webmention.io/api/mentions.jf2?per-page="+a+"&sort-by="+u+"&sort-dir="+c;i.forEach((function(e){f+="&target[]="+encodeURIComponent("http:"+e)+"&target[]="+encodeURIComponent("https:"+e)})),function(e,t){if(window.fetch)window.fetch(e).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))})).then((function(e){return e.json()})).then(t).catch((function(e){console.error("Request failed",e)}));else{var n=new XMLHttpRequest;n.onload=function(e){t(JSON.parse(e))},n.onerror=function(e){console.error("Request failed",e)}}}(f,(function(n){var o="",r=[],i=[];l&&(r=i);var a={"in-reply-to":r,"like-of":i,"repost-of":i,"bookmark-of":i,"mention-of":r,rsvp:r};n.children.forEach((function(e){var t=a[e["wm-property"]];t&&t.push(e)})),r.length>0&&r!==i&&(o+=function(t){var n="<h2>"+t.length+b(" Response",t.length)+'</h2><ul class="comments">';return t.forEach((function(t){var o,r;n+="<li>",n+=m(t,!0),n+=' <a class="source" rel="nofollow ugc" href="'+t[s]+'">',t.author&&t.author.name?n+=d(t.author.name):n+=d(t.url.split("/")[2]),n+="</a>: ",t.name?(o="name",r=t.name):t.content&&t.content.text?(o="text",r=g(t)):(o="name",r="("+e("mention")+")"),n+='<span class="'+o+'">'+r+"</span>",n+="</li>"})),n+="</ul>"}(v(r))),i.length>0&&(o+=function(e){var t="<h2>"+e.length+b(" Reaction",e.length)+'</h2><ul class="reacts">';return e.forEach((function(e){t+=m(e)})),t}(v(i))),t.innerHTML=o}))}}))}();