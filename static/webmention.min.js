!function(){"use strict";window.i18next=window.i18next||{t:function(e){return e}};var e=window.i18next.t.bind(window.i18next);function t(e,t){return document.currentScript.getAttribute("data-"+e)||t}var n=t("page-url",window.location.href.replace(/#.*$/,"")),o=t("add-urls",void 0),r=t("id","webmentions"),a=t("wordcount"),i=t("max-webmentions",30),s=t("prevent-spoofing")?"wm-source":"url",c=t("sort-by","published"),u=t("sort-dir","up"),l=t("comments-are-reactions"),f={"in-reply-to":e("replied"),"like-of":e("liked"),"repost-of":e("reposted"),"bookmark-of":e("bookmarked"),"mention-of":e("mentioned"),rsvp:e("RSVPed"),"follow-of":e("followed")},p={"in-reply-to":"💬","like-of":"❤️","repost-of":"🔄","bookmark-of":"⭐️","mention-of":"💬",rsvp:"📅","follow-of":"🐜"},h={yes:"✅",no:"❌",interested:"💡",maybe:"💭"};function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function m(t,n){var o=d(t.author&&t.author.name?t.author.name:t.url.split("/")[2]),r=f[t["wm-property"]]||e("reacted");!n&&t.content&&t.content.text&&(r+=": "+g(t));var a='<a class="reaction" rel="nofollow ugc" title="'+o+" "+r+'" href="'+t[s]+'">';return t.author&&t.author.photo&&(a+='<img src="'+d(t.author.photo)+'" loading="lazy" decoding="async" alt="'+o+'">'),a+=p[t["wm-property"]]||"💥",t.rsvp&&h[t.rsvp]&&(a+="<sub>"+h[t.rsvp]+"</sub>"),a+="</a>"}function w(e){return e.substr(e.indexOf("//"))}function v(e){var t=[],n={};return e.forEach((function(e){var o=w(e.url);n[o]||(t.push(e),n[o]=!0)})),t}function g(e){var t=d(e.content.text);if(a){var n=t.replace(/\s+/g," ").split(" ",a+1);n.length>a&&(n[a-1]+="&hellip;",t=(n=n.slice(0,a)).join(" "))}return t}window.addEventListener("load",(function(){var t=document.getElementById(r);if(t){var a=[w(n)];o&&o.split("|").forEach((function(e){a.push(w(e))}));var f="https://webmention.io/api/mentions.jf2?per-page="+i+"&sort-by="+c+"&sort-dir="+u;a.forEach((function(e){f+="&target[]="+encodeURIComponent("http:"+e)+"&target[]="+encodeURIComponent("https:"+e)})),function(e,t){if(window.fetch)window.fetch(e).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))})).then((function(e){return e.json()})).then(t).catch((function(e){console.error("Request failed",e)}));else{var n=new XMLHttpRequest;n.onload=function(e){t(JSON.parse(e))},n.onerror=function(e){console.error("Request failed",e)}}}(f,(function(n){var o="",r=[],a=[];l&&(r=a);var i={"in-reply-to":r,"like-of":a,"repost-of":a,"bookmark-of":a,"mention-of":r,rsvp:r};n.children.forEach((function(e){var t=i[e["wm-property"]];t&&t.push(e)})),r.length>0&&r!==a&&(o+=function(t){var n="<h2>"+t.length+e(" Responses")+'</h2><ul class="comments">';return t.forEach((function(t){var o,r;n+="<li>",n+=m(t,!0),n+=' <a class="source" rel="nofollow ugc" href="'+t[s]+'">',t.author&&t.author.name?n+=d(t.author.name):n+=d(t.url.split("/")[2]),n+="</a>: ",t.name?(o="name",r=t.name):t.content&&t.content.text?(o="text",r=g(t)):(o="name",r="("+e("mention")+")"),n+='<span class="'+o+'">'+r+"</span>",n+="</li>"})),n+="</ul>"}(v(r))),a.length>0&&(o+=function(t){var n="<h2>"+t.length+e(" Reactions")+'</h2><ul class="reacts">';return t.forEach((function(e){n+=m(e)})),n}(v(a))),t.innerHTML=o}))}}))}();